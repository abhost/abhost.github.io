<!DOCTYPE HTML>
<html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta property="og:type" content="website">
<meta property="og:title" content="AbsqTube">
<meta property="og:description" content="Simple YouTube Bypasser">
<meta name="theme-color" content="#d42a2a">
  <title>URL Shortener</title>
</head>

<body>
  <label style="font-family:'Segoe UI'">Name</label><br>
  <input type="text" style="width:400px; height:20px; font-family:'Segoe UI'" id="name" placeholder="Enter a name..."><br><br>
    <label style="font-family:'Segoe UI'">URL To Redirect</label><br>
  <input type="text" style="width:400px; height:20px; font-family:'Segoe UI'" id="redirect" placeholder="Enter a URL to redirect..."><br><br>
  <button style="width:100px; height:25px; font-family:'Segoe UI'; margin:10px" onclick="create()">Create</button><br>
  <label id="result" style="font-family:'Segoe UI'">URL will appear here.</label>
  <script>
     var faunadb = window.faunadb
  var q = faunadb.query
  var client = new faunadb.Client({
    secret: 'fnAEWN0RMFAAwFxR2C5vwBRsORnw7OriYRS0cvVd',
    domain: 'db.eu.fauna.com',
    scheme: 'https',
  })
function create(){


client.query(
  q.Get(
    q.Match(q.Index('posts_by_name'), document.getElementById("name"))
  )
)
.then((ret) => 
      
document.getElementById("result").innerHTML = "This name is taken."

)
.catch(function(e){
    client.query(
  q.Create(
    q.Collection('url-database'),
    { data: { name: document.getElementById("name").value, url:  document.getElementById("redirect").value } },
  )
)
.then((ret) =>
     
     document.getElementById("result").innerHTML = "https://cancels.github.io/redirect.html?" + ret.data.name
     )
});




}
    </script>
</body>

</html>
